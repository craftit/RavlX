
cmake_minimum_required(VERSION 3.10)
project(RavlTest)

set(CMAKE_LEGACY_CYGWIN_WIN32 0)
set(CMAKE_CXX_STANDARD 17)

set(CMAKE_INSTALL_LIBDIR "/usr/local/lib")
set(CMAKE_INSTALL_INCLUDEDIR "/usr/local/include")

set(RAVLX_VERSION 0.1)


FIND_PACKAGE(Threads REQUIRED)
find_package(ZLIB QUIET)
find_package(CURL QUIET)
find_package(GTK2 QUIET)
find_package(LAPACK QUIET)

include (FindPkgConfig)
pkg_check_modules(iksemel QUIET);
pkg_check_modules(libzmq QUIET);
pkg_check_modules(librlog QUIET);
pkg_check_modules(openscenegraph QUIET);
pkg_check_modules(opencv QUIET);
pkg_check_modules(loudmouth QUIET);


$(silent:
$(mapreq:ZLib:zlib:ZLIB_FOUND:$(ZLIB_LIBRARIES):$(ZLIB_INCLUDE_DIRS))
$(mapreq:MacOSX::${CMAKE_SYSTEM_NAME} MATCHES "Darwin"::)
$(mapreq:libCurl:libcurl:CURL_FOUND:$(CURL_LIBRARIES):$(CURL_INCLUDE_DIRS))
$(mapreq:libGTK2:GTK:GTK2_FOUND:$(GTK2_LIBRARIES):$(GTK2_INCLUDE_DIRS))
$(mapreq:gthread:Theads:$(Threads_FOUND):$(CMAKE_THREAD_LIBS_INIT):)
$(mapreq:LAPACK:LibLapack:LAPACK_FOUND:$(LAPACK_LIBRARIES):$(LAPACK_INCLUDE_DIRS))
$(mapreq:ZeroMQ:Zmq:libzmq_FOUND:$(libzmq_LIBRARIES):$(libzmq_INCLUDE_DIRS))
$(mapreq:RLog:RLog:librlog_FOUND:$(librlog_LIBRARIES):$(librlog_INCLUDE_DIRS))
$(mapreq:OpenSceneGraph:OpenSceneGraph.def:openscenegraph_FOUND:$(openscenegraph_LIBRARIES):$(openscenegraph_INCLUDE_DIRS))
$(mapreq:OpenCV:OpenCV:opencv_FOUND:$(opencv_LIBRARIES):$(opencv_INCLUDE_DIRS))
$(mapreq:Loudmouth:loudmouth:loudmouth_FOUND:$(loudmouth_LIBRARIES):$(loudmouth_INCLUDE_DIRS))
)
enable_testing()

$(forall:toplevel:add_subdirectory(src/$(lib))
)

install(DIRECTORY include DESTINATION include)
